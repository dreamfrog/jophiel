<script type="text/javascript">
	function buidlMessageInfo(x,y,url,domain,name,address){
		var html  = "<div>"
        			+"<div>"+name+"</div>"
        			+"<div>"+address+"</div>"
        			+"<div><a href='"+url+"'>"+domain+"</a></div>" 
        			+"<div>"
        			+"<form name='form1' method='get' action='list'>"
        			+"<input type='hidden' name='searchtype' value='around'>"
        			+"<input type='hidden' name='cityname' value='北京'>"
        			+"<input type='hidden' name='lat' value='"+y+"'>"
        			+"<input type='hidden' name='lng' value='"+x+"'>"
        			
        			+"<input type='text' name='kw' >"
        			+"<input type='submit' value='周边搜'>"
        			
        			+"距离<input type='text' name='distance' value='3000'> "
        			+"</form>"
        			+"</div>"     
        			+"</div>";
		return html;
	}
	
     var messages = [];
  	{% for search in searchresult %}  
		messages.push(
		{
			x:{{ search.lseattr.geo.x }},
			y:{{ search.lseattr.geo.y }},
			id:"{{ search.id}}",
			showinfo:buidlMessageInfo('{{ search.lseattr.geo.x }}',
			'{{ search.lseattr.geo.y }}','{{ search.attr.url }}','{{ search.meta.domain}}',
			'{{ search.attr.name }}','{{search.attr.address}}'),
			
		}
		);
		
	{% endfor %}	
 
 	function buidlClickMessageInfo(lat,lng){
		var html  = "<div>"
	        		+"<form name='form1' method='get' action='list'>"
	        			+"<input type='hidden' name='searchtype' value='around'>"
	        			+"<input type='hidden' name='cityname' value='北京'>"
	        			+"<input type='hidden' name='lat' value='"+lat+"'>"
	        			+"<input type='hidden' name='lng' value='"+lng+"'>"
	        			+"<input type='text' name='kw' >"
						+"<div>"
	        				+"<input type='submit' value='周边搜'>"
	        			+"</div>"
						+"<div>"
	        				+"距离"
						+"</div>"
						+"<div>"
							+"<input type='text' name='distance' value='3000'> "
						+"</div>"
        			+"</form>"
        			+"</div>" 
		return html;
	}
    	
</script>